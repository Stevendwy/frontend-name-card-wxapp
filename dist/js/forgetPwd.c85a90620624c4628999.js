(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4I33":function(e,t,n){var a;!function(o,r){"use strict";void 0===(a=function(){return function(e,t){if(void 0===e)throw new Error("Geetest requires browser environment");var n=e.document,a=e.Math,o=n.getElementsByTagName("head")[0];function r(e){this._obj=e}function c(e){var t=this;new r(e)._each(function(e,n){t[e]=n})}r.prototype={_each:function(e){var t=this._obj;for(var n in t)t.hasOwnProperty(n)&&e(n,t[n]);return this}},c.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return l(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(e){var t=this;new r(e)._each(function(e,n){t[e]=n})}};var l=function(e){return"string"==typeof e},i={},s={},u=function(e,t,n,a){t=function(e){return e.replace(/^https?:\/\/|\/$/g,"")}(t);var o=function(e){0!==(e=e.replace(/\/+/g,"/")).indexOf("/")&&(e="/"+e);return e}(n)+function(e){if(!e)return"";var t="?";new r(e)._each(function(e,n){(l(n)||function(e){return"number"==typeof e}(n)||function(e){return"boolean"==typeof e}(n))&&(t=t+encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}),"?"===t&&(t="");return t.replace(/&$/,"")}(a);return t&&(o=e+t+o),o},d=function(e,t,a,r,c){var l=function(i){var s=u(e,t[i],a,r);!function(e,t){var a=n.createElement("script");a.charset="UTF-8",a.async=!0,a.onerror=function(){t(!0)};var r=!1;a.onload=a.onreadystatechange=function(){r||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(r=!0,setTimeout(function(){t(!1)},0))},a.src=e,o.appendChild(a)}(s,function(e){e?i>=t.length-1?c(!0):l(i+1):c(!1)})};l(0)},f=function(t,n,o,r){if("object"==typeof(c=o.getLib)&&null!==c)return o._extend(o.getLib),void r(o);var c;if(o.offline)r(o._get_fallback_config());else{var l="geetest_"+(parseInt(1e4*a.random())+(new Date).valueOf());e[l]=function(t){"success"===t.status?r(t.data):t.status?r(o._get_fallback_config()):r(t),e[l]=void 0;try{delete e[l]}catch(e){}},d(o.protocol,t,n,{gt:o.gt,callback:l},function(e){e&&r(o._get_fallback_config())})}},p=function(e,t){var n={networkError:"网络错误"};if("function"!=typeof t.onError)throw new Error(n[e]);t.onError(n[e])};e.Geetest&&(s.slide="loaded");var g=function(t,n){var a=new c(t);t.https?a.protocol="https://":t.protocol||(a.protocol=e.location.protocol+"//"),f([a.api_server||a.apiserver],a.type_path,a,function(t){var o=t.type,r=function(){a._extend(t),n(new e.Geetest(a))};i[o]=i[o]||[];var c=s[o]||"init";"init"===c?(s[o]="loading",i[o].push(r),d(a.protocol,t.static_servers||t.domains,t[o]||t.path,null,function(e){if(e)s[o]="fail",p("networkError",a);else{s[o]="loaded";for(var t=i[o],n=0,r=t.length;n<r;n+=1){var c=t[n];"function"==typeof c&&c()}i[o]=[]}})):"loaded"===c?r():"fail"===c?p("networkError",a):"loading"===c&&i[o].push(r)})};return e.initGeetest=g,g}(o)}.call(t,n,t,e))||(e.exports=a)}("undefined"!=typeof window?window:this)},"Hd+C":function(e,t,n){"use strict";(function(e){var a=s(n("Zx67")),o=s(n("kiBT")),r=s(n("OvRC")),c=s(n("pFYg")),l=s(n("C4MV")),i=s(n("woOf"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,l.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n("U7vG"),p=_(f),g=_(n("4GUf")),h=n("5qLU"),m=n("Zfgq"),v=_(n("mtWM"));n("kVJM");n("qeJi");function _(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,c.default)(t))&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}var C={uc_sendCode:{url:h.UCENTER+"/mock/send_code",method:"post"},uc_resetPwd:{url:h.UCENTER+"/password/reset",method:"put"},uc_phoneExist:function(e){return{url:h.UCENTER+"/user/phone_"+e+"/exists"}},uc_geeInit:function(e){return{url:h.UCGEE+"/gee/getChallenge?addressIp="+e+"&t="+(new Date).getTime()}},uc_geeVerify:{url:h.UCGEE+"/gee/verifyLogin",method:"post"}},E=function(t){function n(t){w(this,n);var o=y(this,(n.__proto__||(0,a.default)(n)).call(this,t));return o.loadCaptchas=function(e){v.default.request(C.uc_geeInit(e)).then(function(e){if(200===e.status){var t=e.data;initGeetest({gt:t.gt,challenge:t.challenge,offline:!t.success,new_captcha:t.serverStatus,product:"bind"},o.handlerEmbed),o.setState({serverStatus:t.serverStatus})}}).catch(function(e){console.log(e),g.default.MsgTip({msg:"服务器繁忙"})})},o.handlerEmbed=function(t){var n=o;t.onError(function(){g.default.MsgTip({msg:"验证错误"})}).onSuccess(function(){var a=t.getValidate(),o=n.state.serverStatus,r=e("#tel").val().replace(/\s+/g,"");a||g.default.MsgTip({msg:"请完成验证"}),v.default.request(u({},C.uc_geeVerify,{data:{challenge:a.geetest_challenge,validate:a.geetest_validate,seccode:a.geetest_seccode,addressIp:r,serverStatus:o}})).then(function(e){200!==e.status&&t.reset()}).catch(function(e){console.log(e),g.default.MsgTip({msg:"服务器繁忙"})}),n.nextHandle()}),t&&o.setState({captchaObj:t})},o.checkTel=function(e){return/^1[34578]\d{9}$/.test(e)?(o.setState({telCorrect:!0}),!0):(g.default.MsgTip({msg:"请输入正确的手机号码"}),!1)},o.changeHandle=function(){var t=e("#tel").val().replace(/\s+/g,"");11===t.length?o.setState({tel:t,inputComp:!0}):o.setState({inputComp:!1})},o.deleteTel=function(){e("#tel").val("").focus(),o.setState({tel:"",inputComp:!1})},o.onlyNum=function(){e("#tel").val(e("#tel").val().replace(/\D/g,""))},o.onClickNext=function(){var t=e("#tel").val().replace(/\s+/g,"");o.checkTel(t)&&v.default.request(u({},C.uc_phoneExist(t),{params:{appId:h.UCAPPID}})).then(function(e){var n=e.data;"200"===n.code&&(n.body?(o.loadCaptchas(t),o.getCatcha()):g.default.MsgTip({msg:"手机号还未注册"}))}).catch(function(e){console.log(e),g.default.MsgTip({msg:"服务器繁忙"})})},o.getCatcha=function(){var e=o.state.captchaObj;e?e.verify():setTimeout(o.getCatcha,1e3)},o.nextHandle=function(){var t=e("#tel").val().replace(/\s+/g,"");v.default.request(u({},C.uc_sendCode,{data:{appId:h.UCAPPID,phone:t,usage:"RESET_PASSWORD"}})).then(function(e){var t=e.data;"200"===t.code?(g.default.MsgTip({msg:"验证码已发送"}),o.setState({nextStep:!0})):g.default.MsgTip({msg:t.message})}).catch(function(e){console.log(e),g.default.MsgTip({msg:"服务器繁忙"})})},o.state={tel:"",code:"",nextStep:!1,inputComp:!1},o}return b(n,f.Component),d(n,[{key:"render",value:function(){var t=this.state,n=t.tel,a=t.inputComp;return p.default.createElement("div",{"data-page":"forget-pwd",style:{minHeight:e(window).height()}},this.state.nextStep?p.default.createElement(k,{tel:n}):p.default.createElement("div",{className:"input-area"},p.default.createElement("div",{className:"c-pr"},p.default.createElement("input",{type:"tel",id:"tel",placeholder:"请输入手机号",maxLength:"11",onChange:this.changeHandle,onKeyUp:this.onlyNum,onPaste:this.onlyNum}),p.default.createElement("img",{className:"del-icon",src:"/src/img/user/delete.png",onClick:this.deleteTel})),p.default.createElement("input",{type:"button",className:"submit-btn c-tc",style:{background:a?"#353535":"#c9c9c9"},onClick:this.onClickNext,disabled:!a,value:"下一步"}),p.default.createElement("p",{className:"promotion"},"系统会发送验证码到您的手机，请尽快查收")))}}]),n}();t.default=E;var k=function(t){function n(t){w(this,n);var o=y(this,(n.__proto__||(0,a.default)(n)).call(this,t));return o.onlyNum=function(){e("#code").val(e("#code").val().replace(/\D/g,""))},o.checkCode=function(e){return!!/^\d{4}$/.test(e)||(g.default.MsgTip({msg:"验证码不正确"}),!1)},o.checkPwd=function(e){return e.length<6?(g.default.MsgTip({msg:"新密码长度小于6位，请重新输入"}),!1):!!/^[\x21-\x7E]{6,20}$/.test(e)||(g.default.MsgTip({msg:"新密码不能包含特殊字符，请重新输入"}),!1)},o.checkSame=function(e,t){return e===t||(g.default.MsgTip({msg:"两次密码不一致"}),!1)},o.changeHandle=function(){var t=e("#new-pwd").val().replace(/\s+/g,""),n=e("#confirm-pwd").val().replace(/\s+/g,"");t&&n?o.setState({inputComp:!0}):o.setState({inputComp:!1})},o.compHandle=function(){var t=e("#code").val(),n=e("#new-pwd").val(),a=e("#confirm-pwd").val();if(o.checkCode(t)&&o.checkPwd(n)&&o.checkSame(n,a)){var r=o.props.tel;v.default.request(u({},C.uc_resetPwd,{data:{appId:h.UCAPPID,encryptFlag:!1,newPassword:n,phone:r,phoneCode:t}})).then(function(e){var t=e.data;"200"===t.code?(g.default.MsgTip({msg:"密码修改成功"}),m.browserHistory.replace("/wapLogin")):g.default.MsgTip({msg:t.message})}).catch(function(e){console.log(e),g.default.MsgTip({msg:"服务器繁忙"})})}},o.deletePwd=function(t){e(t.target).prev().val("").focus(),o.setState({inputComp:!1})},o.state={inputComp:!1},o}return b(n,f.Component),d(n,[{key:"render",value:function(){var e=this.state.inputComp;return p.default.createElement("div",{className:"input-area"},p.default.createElement("div",{className:"c-pr"},p.default.createElement("input",{type:"text",id:"code",placeholder:"请输入验证码",maxLength:"4",onChange:this.changeHandle,onKeyUp:this.onlyNum,onPaste:this.onlyNum})),p.default.createElement("div",{className:"c-pr"},p.default.createElement("input",{type:"password",id:"new-pwd",placeholder:"新密码",maxLength:"20",onChange:this.changeHandle}),p.default.createElement("img",{className:"del-icon",src:"/src/img/user/delete.png",onClick:this.deletePwd})),p.default.createElement("div",{className:"c-pr"},p.default.createElement("input",{type:"password",id:"confirm-pwd",placeholder:"确认密码",maxLength:"20",onChange:this.changeHandle}),p.default.createElement("img",{className:"del-icon",src:"/src/img/user/delete.png",onClick:this.deletePwd})),p.default.createElement("div",{className:"pwd-rule"},"密码为6-20位，由字母、数字与符号中的两种组成"),p.default.createElement("input",{type:"button",className:"submit-btn c-tc",style:{background:e?"#353535":"#c9c9c9"},onClick:this.compHandle,value:"完成",disabled:!e}),p.default.createElement("div",{className:"not-recieve"},"如果您10分钟还未收到验证码，请联系客服",p.default.createElement("a",{href:"tel:400-669-6610"}," 400-669-6610 ")))}}]),n}()}).call(this,n("OOjC"))},kVJM:function(e,t,n){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"6JQj":function(e,t,a){},"GVI+":function(e,t,a){},"L8n+":function(t,a,n){"use strict";(function(t){var r=d(n("mvHQ")),l=d(n("Zx67")),o=d(n("kiBT")),s=d(n("OvRC")),i=d(n("pFYg")),u=d(n("C4MV")),c=d(n("woOf"));function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.CustomService=a.StoreType=a.Footer=a.GoodsList=a.AdvertiseImage=a.CouponList=a.AppBanner=a.LeaderInfo=a.LeaderNav=a.StoreLeader=a.ConcernResult=a.StoreSign=a.PartingLine=a.SearchBar=a.StoreNotOpen=a.StoreIndex=void 0;var f=c.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,u.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a.storeIndexState=Q;var m=n("U7vG"),h=S(m),v=n("Zfgq"),_=n("4n+p"),g=n("d2xe"),E=S(n("4GUf")),y=n("f2Hk"),N=n("DOM9"),w=S(N),b=S(n("qAHI")),k=n("5qLU"),C=n("Hl9d");function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}n("GVI+");var O=b.default.CancelToken,A=(0,y.concatPageAndType)("storeIndex"),q={data:{url:k.WXAPI+"/shop/shopIndex",method:"get"},addShop:{url:k.WXAPI+"/user/saveShopCollection",method:"post"},removeShop:{url:k.WXAPI+"/user/removeShopCollection",method:"get"},coupon:{url:k.WXAPI+"/promotion/obtainCoupon",method:"post"}},H=a.StoreIndex=function(e){function a(e){I(this,a);var t=L(this,(a.__proto__||(0,l.default)(a)).call(this,e));return t.state={},document.title="店铺首页",t}return T(a,m.Component),p(a,[{key:"componentWillMount",value:function(){this.props.initialData()}},{key:"componentWillUnmount",value:function(){t(window).scrollTop(1)}},{key:"render",value:function(){var e=this.props,a=e.update,n=e.open_status,r=e.sign,l=e.subscribeAllow;return a?1===n||"1"===n?h.default.createElement("div",{"data-page":"store-index",style:{minHeight:t(window).height()}},h.default.createElement(j,f({query:this.props.location.query},r)),h.default.createElement(x,null),h.default.createElement(Z,{query:this.props.location.query,subscribeAllow:l}),h.default.createElement(P,this.props),h.default.createElement(J,this.props)):h.default.createElement("div",{"data-page":"store-index",style:{minHeight:t(window).height()}},h.default.createElement(R,r)):h.default.createElement(g.LoadingRound,null)}}]),a}(),R=a.StoreNotOpen=function(t){function a(){return I(this,a),L(this,(a.__proto__||(0,l.default)(a)).apply(this,arguments))}return T(a,m.Component),p(a,[{key:"render",value:function(){var t=this.props,a=t.shop_alias_name,n=t.shop_name;return h.default.createElement("div",{className:"storeNotOpen"},h.default.createElement("img",{src:"../src/img/store/store-close-icon.png"}),h.default.createElement("div",{className:"notOpenDesc"},h.default.createElement("p",null,"抱歉，您访问的店铺：",a||n,"，"),h.default.createElement("p",null,"暂未开放，敬请谅解")),h.default.createElement("div",{className:"returnIndexButton"},h.default.createElement("a",{onClick:function(){e.preventDefault(),(0,C.miniProgramLogin)()}},"返回商城首页")))}}]),a}(),j=a.SearchBar=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.changeHandle=function(e){a.value=e.target.value},a.clearHandle=function(){a.value?a.value="":a.setState({innerValue:""})},a.searchJump=function(){v.browserHistory.push("/searchResult?storeHome=true&key="+(a.value||"")+"&shop="+a.props.query.shop+(3==a.props.shop_attr?"&type=3":""))},a.state={innerValue:e.defaultValue},a}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props.value,t=this.state.innerValue;return h.default.createElement("form",{"data-comp":"search-bar-b",className:"g-row-flex",action:"javascript:;"},h.default.createElement("label",{className:"g-col-1 search-label",ref:"label"},h.default.createElement("input",{ref:"search",value:void 0!==e?e:t,type:"search",placeholder:"搜索店铺内商品",onChange:this.changeHandle,className:"search-input"}),""!=(void 0!==e?e:t)&&h.default.createElement("i",{ref:"clear",onTouchTap:this.clearHandle,className:"close-x-icon"}," "),h.default.createElement("i",{className:"search-icon"}," ")),h.default.createElement("button",{className:"search-btn",onClick:this.searchJump},"搜索"))}}]),t}(),x=a.PartingLine=function(e){function t(){return I(this,t),L(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return T(t,m.Component),p(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"partingLine"},h.default.createElement("img",{src:"../src/img/store/bar-parting-line.png"}))}}]),t}(),D=a.StoreSign=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.concernClick=function(e){a.props.subscribeAllow&&a.props.subscribeStore(e)},a.concernRender=function(e){return e?h.default.createElement("div",{className:"concerned"},h.default.createElement("span",null,"已关注")):h.default.createElement("div",{className:"noConcerned"},h.default.createElement("img",{src:"../src/img/store/follow-icon.png"}),h.default.createElement("span",null,"关注"))},a.jumpDetail=function(e,t,a){"self"!=t.shop_type&&a&&a.license_img&&v.browserHistory.push("/store/detail?shop="+e)},a}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.is_subscribe,a=e.sign,n=e.resultShow,r=e.shop_decoration_data,l=e.shop_extend_info,o=e.query,s=e.image_domain;o.shop;return h.default.createElement("div",{className:"storeSign container"},h.default.createElement("div",{className:"storeSignImage",onClick:this.jumpDetail.bind(this,r.shop_id,a,l)},h.default.createElement("img",{src:a.shop_logo?s+"/"+a.shop_logo:"../src/img/temporary/store_logo.png"})),h.default.createElement("div",{className:"storeSignInfo",onClick:this.jumpDetail.bind(this,r.shop_id,a,l)},h.default.createElement("p",{className:"storeSignInfoName"},a.shop_alias_name||a.shop_name),h.default.createElement("p",{className:"storeSignInfoDesc"},"泰然城精选商家 服务保障")),h.default.createElement("div",{className:"storeSignFollowButton",onClick:this.concernClick.bind(this,t)},this.concernRender(t),h.default.createElement(M,{state:t,resultShow:n})))}}]),t}(),M=a.ConcernResult=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.chooseResult=function(e){return e?h.default.createElement("div",{className:"concernSuccess"},h.default.createElement("img",{src:"../src/img/store/concern-result-icon.png"}),h.default.createElement("br",null),h.default.createElement("span",null,"关注成功"),h.default.createElement("p",null,"可到我的收藏内查看最新关注")):h.default.createElement("div",{className:"concernFailed"},h.default.createElement("img",{src:"../src/img/store/concern-result-icon.png"}),h.default.createElement("br",null),h.default.createElement("span",null,"取消关注"))},a}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props.state;return h.default.createElement("div",{className:"concernResult "+(this.props.resultShow?"":"hide")},this.chooseResult(e))}}]),t}(),P=a.StoreLeader=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.setNav=function(e){a.setState({nav:e})},a.state={nav:1},a}return T(t,m.Component),p(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"storeLeader","data-plugin":"swiper"},h.default.createElement(B,{state:this.state,setNav:this.setNav}),h.default.createElement(G,f({state:this.state},this.props)))}}]),t}(),B=a.LeaderNav=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleClick=function(e){a.props.setNav(e)},a}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props.state.nav;return h.default.createElement("ul",{className:"leaderNav"},h.default.createElement("li",{className:1==e?"activeNav":"",onClick:this.handleClick.bind(this,1)},h.default.createElement("span",null,"店铺首页")),h.default.createElement("li",{className:2==e?"activeNav":"",onClick:this.handleClick.bind(this,2)},h.default.createElement("span",null,"全部商品")))}}]),t}(),G=a.LeaderInfo=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.factoryComponent=function(e,t,n,r){var l=a.props.image_domain;switch(e){case"slide":return h.default.createElement(V,{key:r,value:t,image:l});case"coupon":return n?h.default.createElement(U,{key:r,value:t}):"";case"floor_single":return h.default.createElement(W,{key:r,value:t,img:l});case"floor":return h.default.createElement(F,{key:r,value:t,img:l})}},a.factoryArray=function(e,t,n){if(e.length==t.length){for(var r=[],l=0;l<e.length;l++)r.push(a.factoryComponent(e[l],t[l],n,l));return r}},a}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props.state.nav,t=this.props,a=t.update,n=t.shop_decoration_data,r=n.modules,l=n.is_show_coupon,o=this.props.sign.shop_attr,s=r&&r.map(function(e){return e.module_type});return h.default.createElement("div",{className:"leaderInfo"},1==e?a?r&&r.length?h.default.createElement("div",{className:"storeIndexItem"},s&&this.factoryArray(s,r,l)):h.default.createElement("div",{className:"allGoodsItem"},h.default.createElement(w.default,f({},this.props,{storeHomeRequest:"true",shop_attr:o}))):h.default.createElement(g.LoadingRound,null):"",2==e?h.default.createElement("div",{className:"allGoodsItem"},h.default.createElement(w.default,f({},this.props,{storeHomeRequest:"true",shop_attr:o}))):"")}}]),t}(),V=a.AppBanner=function(e){function t(e){return I(this,t),L(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return T(t,m.Component),p(t,[{key:"componentDidMount",value:function(){new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationType:"fraction",loop:!0,autoplay:2e3,lazyLoading:!0})}},{key:"render",value:function(){var e=this.props.value.module_data,t=this.props.image;return h.default.createElement("div",{className:"appBanner swiper-container"},h.default.createElement("ul",{className:"swiper-wrapper"},e.map(function(e,a){return h.default.createElement("li",{className:"swiper-slide",key:a},h.default.createElement("a",{href:e.link},h.default.createElement("img",{src:t+"/"+e.image})))})),h.default.createElement("div",{className:"swiper-pagination custom-pagination"}))}}]),t}(),U=a.CouponList=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.clickHandle=function(e){b.default.request(f({},q.coupon,{data:{coupon_id:e,source:"activity",description:""}})).then(function(e){0===e.data.code?E.default.MsgTip({msg:"领取成功"}):(401==e.data.code&&(window.location.href="/login"),E.default.MsgTip({msg:e.data.msg}))}).catch(function(e){E.default.MsgTip({msg:e.response.data.message})})},a}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this,t=this.props.value.module_data.map(function(t,a){return h.default.createElement("li",{className:"coupon",key:a},h.default.createElement("div",{className:"couponLeft"},h.default.createElement("p",{className:"couponNum"},"￥",h.default.createElement("span",null,t.deduct_money)),h.default.createElement("p",{className:"couponLimit"},"满",h.default.createElement("span",null,t.limit_money),"使用")),h.default.createElement("div",{className:"couponRight"},h.default.createElement("p",{className:"couponText"},"优惠券"),h.default.createElement("span",{className:"couponButton",onClick:e.clickHandle.bind(e,t.id)},"点击领取")))});return h.default.createElement("ul",{className:"couponList"},t)}}]),t}(),W=a.AdvertiseImage=function(e){function t(e){return I(this,t),L(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props.value.module_data,t=this.props.img;return h.default.createElement("div",{className:"advertiseImage"},e.map(function(e,a){return h.default.createElement("a",{key:a,href:e.link},h.default.createElement("img",{src:t+"/"+e.image}))}))}}]),t}(),F=a.GoodsList=function(e){function a(e){I(this,a);var t=L(this,(a.__proto__||(0,l.default)(a)).call(this,e));return t.tradeTypeObj={10:"国内贸易",20:"海淘",30:"跨境保税",40:"海外直邮"},t.tagStyleObj={10:"hide",20:"tag_yellow",30:"tag_blue",40:"tag_yellow"},t}return T(a,m.Component),p(a,[{key:"componentDidMount",value:function(){t(window).scrollTop(1)}},{key:"render",value:function(){var e=this.tradeTypeObj,t=this.tagStyleObj,a=this.props.value.module_name,n=this.props.value.module_data,r=this.props.img,l=n.map(function(a,n){var l=a.primary_image,o=a.id,s=a.current_store,i=a.promotion_tag,u=a.market_price,c=a.title,d=s<=0;return h.default.createElement("li",{className:"goods",key:n},h.default.createElement(v.Link,{to:"/item?item_id="+o},h.default.createElement("div",{className:"goodsImage"},h.default.createElement("img",{src:r+"/"+l}),d?h.default.createElement("div",{className:"float-label"},h.default.createElement("img",{src:"/src/img/search/sale-out-big.png"})):""),h.default.createElement("p",{className:"goodsDesc"},c),h.default.createElement("p",{className:"goodsPrice"},h.default.createElement("span",{className:"nowPrice"},"￥",a.activity_price||a.sell_price),h.default.createElement("span",{className:"oldPrice"},"￥",u)),h.default.createElement("ul",{className:"goodsTag"},h.default.createElement("li",{className:t[a.trade_type],key:"tagType1"},h.default.createElement("span",null,e[a.trade_type])),(i||[]).map(function(e,t){return h.default.createElement("li",{className:"tag_red",key:t},h.default.createElement("span",null,e))}))))});return h.default.createElement("div",{className:"goodsList"},h.default.createElement("div",{className:"title"},a||"今日特卖"),h.default.createElement("ul",{className:"content container"},l))}}]),a}(),J=a.Footer=function(e){function t(e){return I(this,t),L(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return T(t,m.Component),p(t,[{key:"render",value:function(){return h.default.createElement("ul",{className:"footer"},h.default.createElement(X,this.props))}}]),t}(),X=(a.StoreType=function(e){function t(e){I(this,t);var a=L(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.clickHandle=function(){a.setState({hide:!a.state.hide})},a.state={hide:!0},a}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.shop_cat_list,a=e.shop_decoration_data,n=this.state.hide;return h.default.createElement("li",{className:"storeType",onClick:this.clickHandle},h.default.createElement("img",{src:"../src/img/store/store-type-icon.png"}),h.default.createElement("span",null,"商品分类"),h.default.createElement("div",{className:"storeList "+(n?"hide":"")},h.default.createElement("ul",{className:"storeListBody"},t.map(function(e,t){return h.default.createElement("li",{key:t},h.default.createElement(v.Link,{className:"storeListLink",to:"/searchResult?shop="+a.shop_id+"&category="+e.cat_id},e.cat_name))})),h.default.createElement("div",{className:"storeListIcon"})))}}]),t}(),a.CustomService=function(e){function t(e){return I(this,t),L(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return T(t,m.Component),p(t,[{key:"render",value:function(){var e=this.props.sign.shop_attr;return h.default.createElement("li",{className:"customService"},h.default.createElement(g.CustomerService,{className:"save",shopAttr:e},h.default.createElement("img",{src:"../src/img/store/custom-service-icon.png"}),h.default.createElement("span",null,"联系客服")))}}]),t}());function Q(e){return f({},e.searchResult3,e.storeIndex)}var Z=(0,_.connect)(Q,function(e,t){return{subscribeStore:function(a){e(A("subscribeAllow",{state:!1}));var n=void 0;n=a?f({},q.removeShop,{params:{shop_id:(0,r.default)([t.query.shop])}}):f({},q.addShop,{data:{shop_id:t.query.shop}}),b.default.request(f({},n,{cancelToken:new O(function(e){e})})).then(function(t){e(A("subscribeAllow",{state:!0})),0!==t.data.code?(401==t.data.code&&(window.location.href="/login"),E.default.MsgTip({msg:t.data.msg})):(e(A("subscribeStore",{state:!a})),e(A("resultShow",{resultShow:!0})),setTimeout(function(){e(A("resultShow",{resultShow:!1}))},3e3))}).catch(function(t){e(A("subscribeAllow",{state:!0})),console.log(t)})}}})(D);a.default=(0,_.connect)(Q,function(e,t){return f({},(0,N.searchResultDispatch)(e,t),{initialData:function(){var a=t.location.query.shop;e(A("dataUpdate",{update:!1})),b.default.request(f({},q.data,{params:{shop_id:a},cancelToken:new O(function(e){e})})).then(function(t){0===t.data.code&&(e(A("initialData",{value:t.data.data})),e(A("dataUpdate",{update:!0})))}).catch(function(e){console.log(e)})}})})(H)}).call(this,n("OOjC"))},V1dG:function(e,t,a){"use strict";(function(e){var n=u(a("Zx67")),r=u(a("kiBT")),l=u(a("OvRC")),o=u(a("pFYg")),s=u(a("C4MV")),i=u(a("woOf"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=i.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a("U7vG"),p=v(f),m=v(a("qAHI")),h=a("5qLU");function v(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}a("6JQj");var y=m.default.CancelToken,N={data:{url:h.WXAPI+"/shop/shopLicense",method:"get"}},w=function(t){function a(e,t){_(this,a);var r=g(this,(a.__proto__||(0,n.default)(a)).call(this,e));return r.state={image:""},document.title="店铺营业执照",t.isApp&&(window.location.href="jsbridge://set_title?title=店铺营业执照"),r}return E(a,f.Component),d(a,[{key:"componentDidMount",value:function(){var e=this;m.default.request(c({},N.data,{params:{shop_id:this.props.location.query.shop},cancelToken:new y(function(e){e})})).then(function(t){0===t.data.code&&e.setState({image:t.data.data.license})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var t=this.state.image;return p.default.createElement("div",{"data-page":"store-detail",style:{minHeight:e(window).height()}},p.default.createElement("div",{className:"licenseTitle"},"店铺营业执照"),p.default.createElement("div",{className:"licenseDesc"},p.default.createElement("h1",null,"泰然城网店经营者营业执照信息"),p.default.createElement("p",null," 根据国家工商总局《网络交易管理办法》要求对网店营业执照信息公示如下：")),p.default.createElement(b,{image:t}),p.default.createElement("p",{className:"licenseImageDesc"},"（经营者信息以营业执照为准）"))}}]),a}();t.default=w;var b=function(e){function t(){return _(this,t),g(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return E(t,f.Component),d(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"licenseImage"},p.default.createElement("img",{src:this.props.image}))}}]),t}()}).call(this,a("OOjC"))}}]);